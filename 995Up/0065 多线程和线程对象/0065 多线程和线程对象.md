## 多线程和线程对象

### 多线程的概念

线程就是在一个程序中可以并发执行的逻辑。这种并发，是由操作系统调度的，可以理解为同时执行的代码。

现代的CPU都支持多核心多线程，加上操作系统的支持，就可以让程序同时处理信息。比如聊天的程序既要接收网络上的数据，又要接收界面的输入和输出，还要将聊天记录写入数据库，这些逻辑都可以放在并发的代码里执行，这些逻辑中有大量的等待过程，如果独占CPU，效率往往很低。还有一些数据的处理和计算过程也是可以并发执行的，这样可以有效地利用CPU的计算能力。

### 线程的状态

![](/home/lzh/coding/995Up/0065 多线程和线程对象/thread-states.png)

Java的线程对象有着复杂的状态。但它的执行过程其实就是和其它线程对象同享CPU的过程。只有一个线程的程序，同一时间只有一条逻辑路线正在执行，而多线程的程序，其中的逻辑是同时执行的。是否使用多线程的区别，就是串行执行和并发执行的区别。

![](/home/lzh/coding/995Up/0065 多线程和线程对象/cuda-stream-2.png)

线程就好像是程序的一个分身，独立地完成代码给它定义的逻辑。因此要写多线程的程序，就要掌握这些多线程的基础：

* 如何把指定的任务交给一个线程
* 如何得到线程执行这些任务的状态
* 如何让同时执行的线程协调地访问数据和外部设备
* 如何知道线程执行的结果

### 如何创建线程

线程就是个对象。在这里介绍两种传统方法：

* 继承Thread类
* 实现Runnable接口

不管是使用哪种方法，都需要编写run方法。run方法里定义了线程运行时执行的逻辑。

```java
public class MyThread extends Thread{
	
	@Override
	public void run() {
		System.out.println("haha");
	}

	public static void main(String[] args) {
		
		//new 状态
		MyThread myThread = new MyThread();
		myThread.start(); //启动线程，进入runnable状态
		//后面线程会调用run方法，进入run状态
	}
}
```

```java
public class MyThread2 implements Runnable{
	@Override
	public void run() {
		System.out.println("xixi");		
	}
	
	public static void main(String[] args) {
		MyThread2 myThread2 = new MyThread2();
		new Thread(myThread2).start();
	}
}
```

两个线程，同时在控制台输出：

```java
class ThreadOne extends Thread{
	public void run() {
		for (int i=0; i<10000; i++) //10000个“1”
			System.out.print("1"); 
	}
}

class RunnableTwo implements Runnable{
	@Override
	public void run() {
		for (int i=0; i<10000; i++) //10000个“2”
			System.out.print("2"); 
	}	
}

public class ThreadDemo {

	public static void main(String[] args) {
		new ThreadOne().start();
		new Thread(new RunnableTwo()).start();
	}

}
```

练习：启动3个线程，并发地分别输出1000个"a"，1000个"b"，和1000个"c"。

### 定制线程的任务

在构造线程对象的时候，通过构造函数的参数，可以将任务的细节传递给线程对象。

```java
class ThreadA extends Thread{
	public void run() {
		for (int i=0; i<1000; i++)
			System.out.print("A");
	}
}
class ThreadB extends Thread{
	public void run() {
		for (int i=0; i<1000; i++)
			System.out.print("B");
	}
}
class ThreadC extends Thread{
	public void run() {
		for (int i=0; i<1000; i++)
			System.out.print("C");
	}
}

public class ThreadABCDemo {

	public static void main(String[] args) {
		new ThreadA().start();
		new ThreadB().start();
		new ThreadC().start();

	}
}
```

### 线程的暂停

通过来说，不能强行将